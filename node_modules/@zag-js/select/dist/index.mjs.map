{"version":3,"sources":["../src/select.anatomy.ts","../src/select.connect.ts","../src/select.dom.ts","../src/select.utils.ts","../src/select.machine.ts"],"sourcesContent":["import { createAnatomy } from \"@zag-js/anatomy\"\n\nexport const anatomy = createAnatomy(\"select\").parts(\n  \"label\",\n  \"positioner\",\n  \"trigger\",\n  \"option\",\n  \"optionGroup\",\n  \"optionGroupLabel\",\n  \"hiddenSelect\",\n  \"content\",\n)\nexport const parts = anatomy.build()\n","import { getEventKey, type EventKeyMap } from \"@zag-js/dom-event\"\nimport { ariaAttr, dataAttr, getByTypeahead, isEditableElement, isSelfEvent } from \"@zag-js/dom-query\"\nimport { getPlacementStyles } from \"@zag-js/popper\"\nimport type { NormalizeProps, PropTypes } from \"@zag-js/types\"\nimport { visuallyHiddenStyle } from \"@zag-js/visually-hidden\"\nimport { parts } from \"./select.anatomy\"\nimport { dom } from \"./select.dom\"\nimport type {\n  Option,\n  OptionGroupLabelProps,\n  OptionGroupProps,\n  OptionProps,\n  PublicApi,\n  Send,\n  State,\n} from \"./select.types\"\nimport * as utils from \"./select.utils\"\n\nexport function connect<T extends PropTypes>(state: State, send: Send, normalize: NormalizeProps<T>): PublicApi<T> {\n  const disabled = state.context.disabled\n  const invalid = state.context.invalid\n  const isInteractive = state.context.isInteractive\n\n  const isOpen = state.matches(\"open\")\n\n  const highlightedOption = state.context.highlightedOption\n  const selectedOption = state.context.selectedOption\n  const isTypingAhead = state.context.isTypingAhead\n\n  function getOptionState(props: OptionProps) {\n    const id = dom.getOptionId(state.context, props.value)\n    return {\n      isDisabled: Boolean(props.disabled || disabled),\n      isHighlighted: state.context.highlightedId === id,\n      isChecked: state.context.selectedOption?.value === props.value,\n    }\n  }\n\n  const popperStyles = getPlacementStyles({\n    placement: state.context.currentPlacement,\n  })\n\n  return {\n    isOpen,\n    highlightedOption,\n    selectedOption,\n\n    focus() {\n      dom.getTriggerElement(state.context)?.focus()\n    },\n\n    open() {\n      send(\"OPEN\")\n    },\n\n    close() {\n      send(\"CLOSE\")\n    },\n\n    setSelectedOption(value: Option) {\n      utils.validateOptionData(value)\n      send({ type: \"SELECT_OPTION\", value })\n    },\n\n    setHighlightedOption(value: Option) {\n      utils.validateOptionData(value)\n      send({ type: \"HIGHLIGHT_OPTION\", value })\n    },\n\n    clearSelectedOption() {\n      send({ type: \"CLEAR_SELECTED\" })\n    },\n\n    getOptionState,\n\n    labelProps: normalize.label({\n      dir: state.context.dir,\n      id: dom.getLabelId(state.context),\n      ...parts.label.attrs,\n      \"data-disabled\": dataAttr(disabled),\n      \"data-invalid\": dataAttr(invalid),\n      \"data-readonly\": dataAttr(state.context.readOnly),\n      htmlFor: dom.getHiddenSelectId(state.context),\n      onClick() {\n        if (disabled) return\n        dom.getTriggerElement(state.context)?.focus()\n      },\n    }),\n\n    positionerProps: normalize.element({\n      ...parts.positioner.attrs,\n      id: dom.getPositionerId(state.context),\n      style: popperStyles.floating,\n    }),\n\n    triggerProps: normalize.button({\n      id: dom.getTriggerId(state.context),\n      disabled,\n      dir: state.context.dir,\n      type: \"button\",\n      \"aria-controls\": dom.getContentId(state.context),\n      \"aria-expanded\": isOpen,\n      \"data-state\": isOpen ? \"open\" : \"closed\",\n      \"aria-haspopup\": \"listbox\",\n      \"aria-labelledby\": dom.getLabelId(state.context),\n      ...parts.trigger.attrs,\n      \"data-disabled\": dataAttr(disabled),\n      \"data-invalid\": dataAttr(invalid),\n      \"aria-invalid\": invalid,\n      \"data-readonly\": dataAttr(state.context.readOnly),\n      \"data-placement\": state.context.currentPlacement,\n      \"data-placeholder-shown\": dataAttr(!state.context.hasSelectedOption),\n      onPointerDown(event) {\n        if (event.button || event.ctrlKey || !isInteractive) return\n        event.currentTarget.dataset.pointerType = event.pointerType\n        if (disabled || event.pointerType === \"touch\") return\n        send({ type: \"TRIGGER_CLICK\" })\n      },\n      onClick(event) {\n        if (!isInteractive || event.button) return\n        if (event.currentTarget.dataset.pointerType === \"touch\") {\n          send({ type: \"TRIGGER_CLICK\" })\n        }\n      },\n      onFocus() {\n        send(\"TRIGGER_FOCUS\")\n      },\n      onBlur() {\n        send(\"TRIGGER_BLUR\")\n      },\n      onKeyDown(event) {\n        if (!isInteractive) return\n        const keyMap: EventKeyMap = {\n          ArrowUp() {\n            send({ type: \"ARROW_UP\" })\n          },\n          ArrowDown() {\n            send({ type: \"ARROW_DOWN\" })\n          },\n          ArrowLeft() {\n            send({ type: \"ARROW_LEFT\" })\n          },\n          ArrowRight() {\n            send({ type: \"ARROW_RIGHT\" })\n          },\n          Home() {\n            send({ type: \"HOME\" })\n          },\n          Enter() {\n            send({ type: \"TRIGGER_CLICK\" })\n          },\n          End() {\n            send({ type: \"END\" })\n          },\n          Space(event) {\n            if (isTypingAhead) {\n              send({ type: \"TYPEAHEAD\", key: event.key })\n            } else {\n              send({ type: \"TRIGGER_KEY\" })\n            }\n          },\n        }\n\n        const exec = keyMap[getEventKey(event, state.context)]\n\n        if (exec) {\n          exec(event)\n          event.preventDefault()\n          return\n        }\n\n        if (getByTypeahead.isValidEvent(event)) {\n          send({ type: \"TYPEAHEAD\", key: event.key })\n          event.preventDefault()\n        }\n      },\n    }),\n\n    getOptionProps(props: OptionProps) {\n      const { value, label, valueText } = props\n      const optionState = getOptionState(props)\n      return normalize.element({\n        id: dom.getOptionId(state.context, value),\n        role: \"option\",\n        ...parts.option.attrs,\n        \"data-label\": label,\n        \"data-value\": value,\n        \"data-valuetext\": valueText ?? label,\n        \"aria-selected\": optionState.isChecked,\n        \"data-state\": optionState.isChecked ? \"checked\" : \"unchecked\",\n        \"data-highlighted\": dataAttr(optionState.isHighlighted),\n        \"data-disabled\": dataAttr(optionState.isDisabled),\n        \"aria-disabled\": ariaAttr(optionState.isDisabled),\n      })\n    },\n\n    getOptionGroupLabelProps(props: OptionGroupLabelProps) {\n      const { htmlFor } = props\n      return normalize.element({\n        id: dom.getOptionGroupId(state.context, htmlFor),\n        role: \"group\",\n        ...parts.optionGroupLabel.attrs,\n      })\n    },\n\n    getOptionGroupProps(props: OptionGroupProps) {\n      const { id } = props\n      return normalize.element({\n        ...parts.optionGroup.attrs,\n        \"data-disabled\": dataAttr(disabled),\n        id: dom.getOptionGroupId(state.context, id),\n        \"aria-labelledby\": dom.getOptionGroupLabelId(state.context, id),\n      })\n    },\n\n    hiddenSelectProps: normalize.select({\n      ...parts.hiddenSelect.attrs,\n      name: state.context.name,\n      form: state.context.form,\n      disabled: !isInteractive,\n      \"aria-hidden\": true,\n      id: dom.getHiddenSelectId(state.context),\n      defaultValue: state.context.selectedOption?.value,\n      style: visuallyHiddenStyle,\n      tabIndex: -1,\n      // Some browser extensions will focus the hidden select.\n      // Let's forward the focus to the trigger.\n      onFocus() {\n        dom.getTriggerElement(state.context)?.focus()\n      },\n      \"aria-labelledby\": dom.getLabelId(state.context),\n    }),\n\n    contentProps: normalize.element({\n      hidden: !isOpen,\n      dir: state.context.dir,\n      id: dom.getContentId(state.context),\n      role: \"listbox\",\n      ...parts.content.attrs,\n      \"data-state\": isOpen ? \"open\" : \"closed\",\n      \"aria-activedescendant\": state.context.highlightedId || \"\",\n      \"aria-labelledby\": dom.getLabelId(state.context),\n      tabIndex: 0,\n      onPointerMove(event) {\n        if (!isInteractive) return\n        const option = dom.getClosestOption(event.target)\n        if (!option || option.hasAttribute(\"data-disabled\")) {\n          send({ type: \"POINTER_LEAVE\" })\n        } else {\n          send({ type: \"POINTER_MOVE\", id: option.id, target: option })\n        }\n      },\n      onPointerUp(event) {\n        if (!isInteractive) return\n        const option = dom.getClosestOption(event.target)\n        if (!option || option.hasAttribute(\"data-disabled\")) return\n        send({ type: \"OPTION_CLICK\", src: \"pointerup\", id: option.id })\n      },\n      onPointerLeave() {\n        send({ type: \"POINTER_LEAVE\" })\n      },\n      onClick(event) {\n        if (!isInteractive) return\n        const option = dom.getClosestOption(event.target)\n        if (!option || option.hasAttribute(\"data-disabled\")) return\n        send({ type: \"OPTION_CLICK\", src: \"click\", id: option.id })\n      },\n      onKeyDown(event) {\n        if (!isInteractive || !isSelfEvent(event)) return\n\n        const keyMap: EventKeyMap = {\n          ArrowUp() {\n            send({ type: \"ARROW_UP\" })\n          },\n          ArrowDown() {\n            send({ type: \"ARROW_DOWN\" })\n          },\n          Home() {\n            send({ type: \"HOME\" })\n          },\n          End() {\n            send({ type: \"END\" })\n          },\n          Tab(event) {\n            if (event.shiftKey) return\n            send({ type: \"TAB\" })\n          },\n          Enter() {\n            send({ type: \"TRIGGER_KEY\" })\n          },\n          Space(event) {\n            if (isTypingAhead) {\n              send({ type: \"TYPEAHEAD\", key: event.key })\n            } else {\n              keyMap.Enter?.(event)\n            }\n          },\n        }\n\n        const exec = keyMap[getEventKey(event)]\n\n        if (exec) {\n          exec(event)\n          event.preventDefault()\n          return\n        }\n\n        if (isEditableElement(event.target)) {\n          return\n        }\n\n        if (getByTypeahead.isValidEvent(event)) {\n          send({ type: \"TYPEAHEAD\", key: event.key })\n          event.preventDefault()\n        }\n      },\n    }),\n  }\n}\n","import { createScope, isHTMLElement, nextById, prevById, query, queryAll, getByTypeahead } from \"@zag-js/dom-query\"\nimport type { MachineContext as Ctx, Option } from \"./select.types\"\n\nexport const dom = createScope({\n  getContentId: (ctx: Ctx) => ctx.ids?.content ?? `select:${ctx.id}:content`,\n  getTriggerId: (ctx: Ctx) => ctx.ids?.trigger ?? `select:${ctx.id}:trigger`,\n  getLabelId: (ctx: Ctx) => ctx.ids?.label ?? `select:${ctx.id}:label`,\n  getOptionId: (ctx: Ctx, id: string | number) => ctx.ids?.option?.(id) ?? `select:${ctx.id}:option:${id}`,\n  getHiddenSelectId: (ctx: Ctx) => ctx.ids?.hiddenSelect ?? `select:${ctx.id}:select`,\n  getPositionerId: (ctx: Ctx) => ctx.ids?.positioner ?? `select:${ctx.id}:positioner`,\n  getOptionGroupId: (ctx: Ctx, id: string | number) => ctx.ids?.optionGroup?.(id) ?? `select:${ctx.id}:optgroup:${id}`,\n  getOptionGroupLabelId: (ctx: Ctx, id: string | number) =>\n    ctx.ids?.optionGroupLabel?.(id) ?? `select:${ctx.id}:optgroup-label:${id}`,\n\n  getHiddenSelectElement: (ctx: Ctx) => dom.getById(ctx, dom.getHiddenSelectId(ctx)),\n  getContentElement: (ctx: Ctx) => dom.getById(ctx, dom.getContentId(ctx)),\n  getTriggerElement: (ctx: Ctx) => dom.getById(ctx, dom.getTriggerId(ctx)),\n  getPositionerElement: (ctx: Ctx) => {\n    return dom.getById(ctx, dom.getPositionerId(ctx))\n  },\n  getOptionElements: (ctx: Ctx) => {\n    return queryAll(dom.getContentElement(ctx), \"[role=option]:not([data-disabled])\")\n  },\n  getFirstOption: (ctx: Ctx) => {\n    return query(dom.getContentElement(ctx), \"[role=option]:not([data-disabled])\")\n  },\n  getLastOption: (ctx: Ctx) => {\n    return query(dom.getContentElement(ctx), \"[role=option]:not([data-disabled]):last-of-type\")\n  },\n  getNextOption: (ctx: Ctx, currentId: string) => {\n    const options = dom.getOptionElements(ctx)\n    return nextById(options, currentId, ctx.loop)\n  },\n  getPreviousOption: (ctx: Ctx, currentId: string) => {\n    const options = dom.getOptionElements(ctx)\n    return prevById(options, currentId, ctx.loop)\n  },\n  getOptionDetails(option: HTMLElement) {\n    const { label, value } = option.dataset\n    return { label, value } as Option\n  },\n  getMatchingOption(ctx: Ctx, key: string, current: any) {\n    return getByTypeahead(dom.getOptionElements(ctx), { state: ctx.typeahead, key, activeId: current })\n  },\n  getHighlightedOption(ctx: Ctx) {\n    if (!ctx.highlightedId) return null\n    return dom.getById(ctx, ctx.highlightedId)\n  },\n  getClosestOption(target: EventTarget | HTMLElement | null) {\n    return isHTMLElement(target) ? target.closest<HTMLElement>(\"[data-part=option]\") : null\n  },\n})\n","import { isObject } from \"@zag-js/utils\"\nimport type { Option } from \"./select.types\"\n\nexport function isOptionData(v: any): v is Option {\n  return isObject(v) && \"value\" in v && \"label\" in v\n}\n\nexport function validateOptionData(v: any): asserts v is Option {\n  if (!isOptionData(v)) {\n    throw new TypeError(\"Expected an option data object\")\n  }\n}\n\nexport function highlightMessage(label: string): string {\n  return `${label} selected`\n}\n\nexport function openMessage(count: number): string {\n  return `${count} result${\n    count === 1 ? \" is\" : \"s are\"\n  } available, use up and down arrow keys to navigate. Press Enter or Space Bar keys to select.`\n}\n","import { createMachine } from \"@zag-js/core\"\nimport { trackDismissableElement } from \"@zag-js/dismissable\"\nimport { getByTypeahead, raf } from \"@zag-js/dom-query\"\nimport { setElementValue, trackFormControl } from \"@zag-js/form-utils\"\nimport { observeAttributes } from \"@zag-js/mutation-observer\"\nimport { getPlacement } from \"@zag-js/popper\"\nimport { proxyTabFocus } from \"@zag-js/tabbable\"\nimport { compact, json } from \"@zag-js/utils\"\nimport { dom } from \"./select.dom\"\nimport type { MachineContext, MachineState, UserDefinedContext } from \"./select.types\"\n\nexport function machine(userContext: UserDefinedContext) {\n  const ctx = compact(userContext)\n  return createMachine<MachineContext, MachineState>(\n    {\n      id: \"select\",\n      context: {\n        selectOnTab: false,\n        selectedOption: null,\n        highlightedOption: null,\n        loop: false,\n        closeOnSelect: true,\n        ...ctx,\n        initialSelectedOption: null,\n        prevSelectedOption: null,\n        prevHighlightedOption: null,\n        typeahead: getByTypeahead.defaultOptions,\n        positioning: {\n          placement: \"bottom-start\",\n          gutter: 8,\n          ...ctx.positioning,\n        },\n      },\n\n      computed: {\n        hasSelectedOption: (ctx) => ctx.selectedOption != null,\n        isTypingAhead: (ctx) => ctx.typeahead.keysSoFar !== \"\",\n        isInteractive: (ctx) => !(ctx.disabled || ctx.readOnly),\n        selectedId: (ctx) => (ctx.selectedOption ? dom.getOptionId(ctx, ctx.selectedOption.value) : null),\n        highlightedId: (ctx) => (ctx.highlightedOption ? dom.getOptionId(ctx, ctx.highlightedOption.value) : null),\n        hasSelectedChanged: (ctx) => ctx.selectedOption?.value !== ctx.prevSelectedOption?.value,\n        hasHighlightedChanged: (ctx) => ctx.highlightedOption?.value !== ctx.prevHighlightedOption?.value,\n      },\n\n      initial: \"idle\",\n\n      watch: {\n        selectedOption: [\"syncSelectValue\", \"dispatchChangeEvent\"],\n      },\n\n      on: {\n        HIGHLIGHT_OPTION: {\n          actions: [\"setHighlightedOption\", \"invokeOnHighlight\"],\n        },\n        SELECT_OPTION: {\n          actions: [\"setSelectedOption\", \"invokeOnSelect\"],\n        },\n        CLEAR_SELECTED: {\n          actions: [\"clearSelectedOption\", \"invokeOnSelect\"],\n        },\n      },\n\n      entry: [\"setInitialSelectedOption\"],\n\n      activities: [\"trackFormControlState\"],\n\n      states: {\n        idle: {\n          tags: [\"closed\"],\n          on: {\n            TRIGGER_CLICK: {\n              target: \"open\",\n            },\n            TRIGGER_FOCUS: {\n              target: \"focused\",\n            },\n            OPEN: {\n              target: \"open\",\n            },\n          },\n        },\n\n        focused: {\n          tags: [\"closed\"],\n          entry: [\"focusTrigger\", \"clearHighlightedOption\"],\n          on: {\n            TRIGGER_CLICK: {\n              target: \"open\",\n            },\n            TRIGGER_BLUR: {\n              target: \"idle\",\n              actions: [\"clearHighlightedOption\"],\n            },\n            TRIGGER_KEY: {\n              target: \"open\",\n            },\n            ARROW_UP: {\n              target: \"open\",\n              actions: [\"highlightLastOption\", \"invokeOnHighlight\"],\n            },\n            ARROW_DOWN: {\n              target: \"open\",\n              actions: [\"highlightFirstOption\", \"invokeOnHighlight\"],\n            },\n            ARROW_LEFT: [\n              {\n                guard: \"hasSelectedOption\",\n                actions: [\"selectPreviousOption\", \"invokeOnSelect\"],\n              },\n              {\n                actions: [\"selectLastOption\", \"invokeOnSelect\"],\n              },\n            ],\n            ARROW_RIGHT: [\n              {\n                guard: \"hasSelectedOption\",\n                actions: [\"selectNextOption\", \"invokeOnSelect\"],\n              },\n              {\n                actions: [\"selectFirstOption\", \"invokeOnSelect\"],\n              },\n            ],\n            HOME: {\n              actions: [\"selectFirstOption\", \"invokeOnSelect\"],\n            },\n            END: {\n              actions: [\"selectLastOption\", \"invokeOnSelect\"],\n            },\n            TYPEAHEAD: {\n              actions: [\"selectMatchingOption\", \"invokeOnSelect\"],\n            },\n            OPEN: {\n              target: \"open\",\n            },\n          },\n        },\n\n        open: {\n          tags: [\"open\"],\n          entry: [\"focusContent\", \"highlightSelectedOption\", \"invokeOnOpen\"],\n          exit: [\"scrollContentToTop\"],\n          activities: [\"trackInteractOutside\", \"computePlacement\", \"scrollToHighlightedOption\", \"proxyTabFocus\"],\n          on: {\n            CLOSE: {\n              target: \"focused\",\n              actions: [\"invokeOnClose\"],\n            },\n            TRIGGER_CLICK: {\n              target: \"focused\",\n              actions: [\"invokeOnClose\"],\n            },\n            OPTION_CLICK: [\n              {\n                target: \"focused\",\n                actions: [\"selectHighlightedOption\", \"invokeOnSelect\", \"invokeOnClose\"],\n                guard: \"closeOnSelect\",\n              },\n              {\n                actions: [\"selectHighlightedOption\", \"invokeOnSelect\"],\n              },\n            ],\n            TRIGGER_KEY: [\n              {\n                target: \"focused\",\n                actions: [\"selectHighlightedOption\", \"invokeOnSelect\", \"invokeOnClose\"],\n                guard: \"closeOnSelect\",\n              },\n              {\n                actions: [\"selectHighlightedOption\", \"invokeOnSelect\"],\n              },\n            ],\n            BLUR: {\n              target: \"focused\",\n              actions: [\"invokeOnClose\"],\n            },\n            HOME: {\n              actions: [\"highlightFirstOption\", \"invokeOnHighlight\"],\n            },\n            END: {\n              actions: [\"highlightLastOption\", \"invokeOnHighlight\"],\n            },\n            ARROW_DOWN: [\n              {\n                guard: \"hasHighlightedOption\",\n                actions: [\"highlightNextOption\", \"invokeOnHighlight\"],\n              },\n              {\n                actions: [\"highlightFirstOption\", \"invokeOnHighlight\"],\n              },\n            ],\n            ARROW_UP: [\n              {\n                guard: \"hasHighlightedOption\",\n                actions: [\"highlightPreviousOption\", \"invokeOnHighlight\"],\n              },\n              {\n                actions: [\"highlightLastOption\", \"invokeOnHighlight\"],\n              },\n            ],\n            TYPEAHEAD: {\n              actions: [\"highlightMatchingOption\", \"invokeOnHighlight\"],\n            },\n            POINTER_MOVE: {\n              actions: [\"highlightOption\", \"invokeOnHighlight\"],\n            },\n            POINTER_LEAVE: {\n              actions: [\"clearHighlightedOption\"],\n            },\n            TAB: [\n              {\n                target: \"idle\",\n                actions: [\"selectHighlightedOption\", \"invokeOnClose\", \"invokeOnSelect\", \"clearHighlightedOption\"],\n                guard: \"selectOnTab\",\n              },\n              {\n                target: \"idle\",\n                actions: [\"invokeOnClose\", \"clearHighlightedOption\"],\n              },\n            ],\n          },\n        },\n      },\n    },\n    {\n      guards: {\n        hasHighlightedOption: (ctx) => ctx.highlightedId != null,\n        selectOnTab: (ctx) => !!ctx.selectOnTab,\n        hasSelectedOption: (ctx) => ctx.hasSelectedOption,\n        closeOnSelect: (ctx) => !!ctx.closeOnSelect,\n      },\n      activities: {\n        proxyTabFocus(ctx) {\n          return proxyTabFocus(dom.getContentElement(ctx), {\n            triggerElement: dom.getTriggerElement(ctx),\n            onFocus(el: HTMLElement) {\n              raf(() => el.focus({ preventScroll: true }))\n            },\n          })\n        },\n        trackFormControlState(ctx) {\n          return trackFormControl(dom.getHiddenSelectElement(ctx), {\n            onFieldsetDisabled() {\n              ctx.disabled = true\n            },\n            onFormReset() {\n              ctx.prevSelectedOption = ctx.selectedOption\n              ctx.selectedOption = ctx.initialSelectedOption\n            },\n          })\n        },\n        trackInteractOutside(ctx, _evt, { send }) {\n          let focusable = false\n          return trackDismissableElement(dom.getContentElement(ctx), {\n            exclude: [dom.getTriggerElement(ctx)],\n            onInteractOutside(event) {\n              focusable = event.detail.focusable\n              ctx.onInteractOutside?.(event)\n            },\n            onDismiss() {\n              send({ type: \"BLUR\", src: \"interact-outside\", focusable })\n            },\n          })\n        },\n        computePlacement(ctx) {\n          ctx.currentPlacement = ctx.positioning.placement\n          return getPlacement(dom.getTriggerElement(ctx), dom.getPositionerElement(ctx), {\n            ...ctx.positioning,\n            onComplete(data) {\n              ctx.currentPlacement = data.placement\n            },\n          })\n        },\n        scrollToHighlightedOption(ctx, _evt, { getState }) {\n          const exec = () => {\n            const state = getState()\n            // don't scroll into view if we're using the pointer\n            if (state.event.type === \"POINTER_MOVE\") return\n            const option = dom.getHighlightedOption(ctx)\n            option?.scrollIntoView({ block: \"nearest\" })\n          }\n\n          raf(() => {\n            exec()\n          })\n\n          return observeAttributes(dom.getContentElement(ctx), [\"aria-activedescendant\"], exec)\n        },\n      },\n      actions: {\n        setInitialSelectedOption(ctx) {\n          ctx.initialSelectedOption = ctx.selectedOption\n        },\n        highlightPreviousOption(ctx) {\n          if (!ctx.highlightedId) return\n          const option = dom.getPreviousOption(ctx, ctx.highlightedId)\n          highlightOption(ctx, option)\n        },\n        highlightNextOption(ctx) {\n          if (!ctx.highlightedId) return\n          const option = dom.getNextOption(ctx, ctx.highlightedId)\n          highlightOption(ctx, option)\n        },\n        highlightFirstOption(ctx) {\n          const option = dom.getFirstOption(ctx)\n          highlightOption(ctx, option)\n        },\n        highlightLastOption(ctx) {\n          const option = dom.getLastOption(ctx)\n          highlightOption(ctx, option)\n        },\n        focusContent(ctx) {\n          raf(() => {\n            dom.getContentElement(ctx)?.focus({ preventScroll: true })\n          })\n        },\n        focusTrigger(ctx, evt) {\n          if (evt.focusable) return\n          raf(() => {\n            dom.getTriggerElement(ctx)?.focus({ preventScroll: true })\n          })\n        },\n        selectHighlightedOption(ctx, evt) {\n          const id = evt.id ?? ctx.highlightedId\n          if (!id) return\n          const option = dom.getById(ctx, id)\n          selectOption(ctx, option)\n        },\n        selectFirstOption(ctx) {\n          const option = dom.getFirstOption(ctx)\n          selectOption(ctx, option)\n        },\n        selectLastOption(ctx) {\n          const option = dom.getLastOption(ctx)\n          selectOption(ctx, option)\n        },\n        selectNextOption(ctx) {\n          if (!ctx.selectedId) return\n          const option = dom.getNextOption(ctx, ctx.selectedId)\n          selectOption(ctx, option)\n        },\n        selectPreviousOption(ctx) {\n          if (!ctx.selectedId) return\n          const option = dom.getPreviousOption(ctx, ctx.selectedId)\n          selectOption(ctx, option)\n        },\n        highlightSelectedOption(ctx) {\n          if (!ctx.selectedOption) return\n          ctx.prevHighlightedOption = ctx.highlightedOption\n          ctx.highlightedOption = ctx.selectedOption\n        },\n        highlightOption(ctx, evt) {\n          const option = evt.target ?? dom.getById(ctx, evt.id)\n          highlightOption(ctx, option)\n        },\n        highlightMatchingOption(ctx, evt) {\n          const option = dom.getMatchingOption(ctx, evt.key, ctx.highlightedId)\n          highlightOption(ctx, option)\n        },\n        selectMatchingOption(ctx, evt) {\n          const option = dom.getMatchingOption(ctx, evt.key, ctx.selectedId)\n          selectOption(ctx, option)\n        },\n        setHighlightedOption(ctx, evt) {\n          if (!evt.value) return\n          ctx.prevHighlightedOption = ctx.highlightedOption\n          ctx.highlightedOption = evt.value\n        },\n        clearHighlightedOption(ctx) {\n          ctx.highlightedOption = null\n        },\n        setSelectedOption(ctx, evt) {\n          if (!evt.value) return\n          ctx.prevSelectedOption = ctx.selectedOption\n          ctx.selectedOption = evt.value\n        },\n        clearSelectedOption(ctx) {\n          ctx.selectedOption = null\n        },\n        scrollContentToTop(ctx) {\n          dom.getContentElement(ctx)?.scrollTo(0, 0)\n        },\n        invokeOnOpen(ctx) {\n          ctx.onOpen?.()\n        },\n        invokeOnClose(ctx) {\n          ctx.onClose?.()\n        },\n        invokeOnHighlight(ctx) {\n          if (!ctx.hasHighlightedChanged) return\n          ctx.onHighlight?.(json(ctx.highlightedOption))\n        },\n        invokeOnSelect(ctx) {\n          if (!ctx.hasSelectedChanged) return\n          ctx.onChange?.(json(ctx.selectedOption))\n        },\n        syncSelectValue(ctx) {\n          const selectedOption = ctx.selectedOption\n          const node = dom.getHiddenSelectElement(ctx)\n          if (!node || !selectedOption) return\n          setElementValue(node, selectedOption.value, { type: \"HTMLSelectElement\" })\n        },\n        dispatchChangeEvent(ctx) {\n          const node = dom.getHiddenSelectElement(ctx)\n          if (!node) return\n          const win = dom.getWin(ctx)\n          const changeEvent = new win.Event(\"change\", { bubbles: true })\n          node.dispatchEvent(changeEvent)\n        },\n      },\n    },\n  )\n}\n\nfunction highlightOption(ctx: MachineContext, option?: HTMLElement | null) {\n  if (!option) return\n  ctx.prevHighlightedOption = ctx.highlightedOption\n  ctx.highlightedOption = dom.getOptionDetails(option)\n}\n\nfunction selectOption(ctx: MachineContext, option?: HTMLElement | null) {\n  if (!option) return\n  ctx.prevSelectedOption = ctx.selectedOption\n  ctx.selectedOption = dom.getOptionDetails(option)\n}\n"],"mappings":";AAAA,SAAS,qBAAqB;AAEvB,IAAM,UAAU,cAAc,QAAQ,EAAE;AAAA,EAC7C;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AAAA,EACA;AACF;AACO,IAAM,QAAQ,QAAQ,MAAM;;;ACZnC,SAAS,mBAAqC;AAC9C,SAAS,UAAU,UAAU,kBAAAA,iBAAgB,mBAAmB,mBAAmB;AACnF,SAAS,0BAA0B;AAEnC,SAAS,2BAA2B;;;ACJpC,SAAS,aAAa,eAAe,UAAU,UAAU,OAAO,UAAU,sBAAsB;AAGzF,IAAM,MAAM,YAAY;AAAA,EAC7B,cAAc,CAAC,QAAa,IAAI,KAAK,WAAW,UAAU,IAAI;AAAA,EAC9D,cAAc,CAAC,QAAa,IAAI,KAAK,WAAW,UAAU,IAAI;AAAA,EAC9D,YAAY,CAAC,QAAa,IAAI,KAAK,SAAS,UAAU,IAAI;AAAA,EAC1D,aAAa,CAAC,KAAU,OAAwB,IAAI,KAAK,SAAS,EAAE,KAAK,UAAU,IAAI,aAAa;AAAA,EACpG,mBAAmB,CAAC,QAAa,IAAI,KAAK,gBAAgB,UAAU,IAAI;AAAA,EACxE,iBAAiB,CAAC,QAAa,IAAI,KAAK,cAAc,UAAU,IAAI;AAAA,EACpE,kBAAkB,CAAC,KAAU,OAAwB,IAAI,KAAK,cAAc,EAAE,KAAK,UAAU,IAAI,eAAe;AAAA,EAChH,uBAAuB,CAAC,KAAU,OAChC,IAAI,KAAK,mBAAmB,EAAE,KAAK,UAAU,IAAI,qBAAqB;AAAA,EAExE,wBAAwB,CAAC,QAAa,IAAI,QAAQ,KAAK,IAAI,kBAAkB,GAAG,CAAC;AAAA,EACjF,mBAAmB,CAAC,QAAa,IAAI,QAAQ,KAAK,IAAI,aAAa,GAAG,CAAC;AAAA,EACvE,mBAAmB,CAAC,QAAa,IAAI,QAAQ,KAAK,IAAI,aAAa,GAAG,CAAC;AAAA,EACvE,sBAAsB,CAAC,QAAa;AAClC,WAAO,IAAI,QAAQ,KAAK,IAAI,gBAAgB,GAAG,CAAC;AAAA,EAClD;AAAA,EACA,mBAAmB,CAAC,QAAa;AAC/B,WAAO,SAAS,IAAI,kBAAkB,GAAG,GAAG,oCAAoC;AAAA,EAClF;AAAA,EACA,gBAAgB,CAAC,QAAa;AAC5B,WAAO,MAAM,IAAI,kBAAkB,GAAG,GAAG,oCAAoC;AAAA,EAC/E;AAAA,EACA,eAAe,CAAC,QAAa;AAC3B,WAAO,MAAM,IAAI,kBAAkB,GAAG,GAAG,iDAAiD;AAAA,EAC5F;AAAA,EACA,eAAe,CAAC,KAAU,cAAsB;AAC9C,UAAM,UAAU,IAAI,kBAAkB,GAAG;AACzC,WAAO,SAAS,SAAS,WAAW,IAAI,IAAI;AAAA,EAC9C;AAAA,EACA,mBAAmB,CAAC,KAAU,cAAsB;AAClD,UAAM,UAAU,IAAI,kBAAkB,GAAG;AACzC,WAAO,SAAS,SAAS,WAAW,IAAI,IAAI;AAAA,EAC9C;AAAA,EACA,iBAAiB,QAAqB;AACpC,UAAM,EAAE,OAAO,MAAM,IAAI,OAAO;AAChC,WAAO,EAAE,OAAO,MAAM;AAAA,EACxB;AAAA,EACA,kBAAkB,KAAU,KAAa,SAAc;AACrD,WAAO,eAAe,IAAI,kBAAkB,GAAG,GAAG,EAAE,OAAO,IAAI,WAAW,KAAK,UAAU,QAAQ,CAAC;AAAA,EACpG;AAAA,EACA,qBAAqB,KAAU;AAC7B,QAAI,CAAC,IAAI;AAAe,aAAO;AAC/B,WAAO,IAAI,QAAQ,KAAK,IAAI,aAAa;AAAA,EAC3C;AAAA,EACA,iBAAiB,QAA0C;AACzD,WAAO,cAAc,MAAM,IAAI,OAAO,QAAqB,oBAAoB,IAAI;AAAA,EACrF;AACF,CAAC;;;ACnDD,SAAS,gBAAgB;AAGlB,SAAS,aAAa,GAAqB;AAChD,SAAO,SAAS,CAAC,KAAK,WAAW,KAAK,WAAW;AACnD;AAEO,SAAS,mBAAmB,GAA6B;AAC9D,MAAI,CAAC,aAAa,CAAC,GAAG;AACpB,UAAM,IAAI,UAAU,gCAAgC;AAAA,EACtD;AACF;;;AFOO,SAAS,QAA6B,OAAc,MAAY,WAA4C;AACjH,QAAM,WAAW,MAAM,QAAQ;AAC/B,QAAM,UAAU,MAAM,QAAQ;AAC9B,QAAM,gBAAgB,MAAM,QAAQ;AAEpC,QAAM,SAAS,MAAM,QAAQ,MAAM;AAEnC,QAAM,oBAAoB,MAAM,QAAQ;AACxC,QAAM,iBAAiB,MAAM,QAAQ;AACrC,QAAM,gBAAgB,MAAM,QAAQ;AAEpC,WAAS,eAAe,OAAoB;AAC1C,UAAM,KAAK,IAAI,YAAY,MAAM,SAAS,MAAM,KAAK;AACrD,WAAO;AAAA,MACL,YAAY,QAAQ,MAAM,YAAY,QAAQ;AAAA,MAC9C,eAAe,MAAM,QAAQ,kBAAkB;AAAA,MAC/C,WAAW,MAAM,QAAQ,gBAAgB,UAAU,MAAM;AAAA,IAC3D;AAAA,EACF;AAEA,QAAM,eAAe,mBAAmB;AAAA,IACtC,WAAW,MAAM,QAAQ;AAAA,EAC3B,CAAC;AAED,SAAO;AAAA,IACL;AAAA,IACA;AAAA,IACA;AAAA,IAEA,QAAQ;AACN,UAAI,kBAAkB,MAAM,OAAO,GAAG,MAAM;AAAA,IAC9C;AAAA,IAEA,OAAO;AACL,WAAK,MAAM;AAAA,IACb;AAAA,IAEA,QAAQ;AACN,WAAK,OAAO;AAAA,IACd;AAAA,IAEA,kBAAkB,OAAe;AAC/B,MAAM,mBAAmB,KAAK;AAC9B,WAAK,EAAE,MAAM,iBAAiB,MAAM,CAAC;AAAA,IACvC;AAAA,IAEA,qBAAqB,OAAe;AAClC,MAAM,mBAAmB,KAAK;AAC9B,WAAK,EAAE,MAAM,oBAAoB,MAAM,CAAC;AAAA,IAC1C;AAAA,IAEA,sBAAsB;AACpB,WAAK,EAAE,MAAM,iBAAiB,CAAC;AAAA,IACjC;AAAA,IAEA;AAAA,IAEA,YAAY,UAAU,MAAM;AAAA,MAC1B,KAAK,MAAM,QAAQ;AAAA,MACnB,IAAI,IAAI,WAAW,MAAM,OAAO;AAAA,MAChC,GAAG,MAAM,MAAM;AAAA,MACf,iBAAiB,SAAS,QAAQ;AAAA,MAClC,gBAAgB,SAAS,OAAO;AAAA,MAChC,iBAAiB,SAAS,MAAM,QAAQ,QAAQ;AAAA,MAChD,SAAS,IAAI,kBAAkB,MAAM,OAAO;AAAA,MAC5C,UAAU;AACR,YAAI;AAAU;AACd,YAAI,kBAAkB,MAAM,OAAO,GAAG,MAAM;AAAA,MAC9C;AAAA,IACF,CAAC;AAAA,IAED,iBAAiB,UAAU,QAAQ;AAAA,MACjC,GAAG,MAAM,WAAW;AAAA,MACpB,IAAI,IAAI,gBAAgB,MAAM,OAAO;AAAA,MACrC,OAAO,aAAa;AAAA,IACtB,CAAC;AAAA,IAED,cAAc,UAAU,OAAO;AAAA,MAC7B,IAAI,IAAI,aAAa,MAAM,OAAO;AAAA,MAClC;AAAA,MACA,KAAK,MAAM,QAAQ;AAAA,MACnB,MAAM;AAAA,MACN,iBAAiB,IAAI,aAAa,MAAM,OAAO;AAAA,MAC/C,iBAAiB;AAAA,MACjB,cAAc,SAAS,SAAS;AAAA,MAChC,iBAAiB;AAAA,MACjB,mBAAmB,IAAI,WAAW,MAAM,OAAO;AAAA,MAC/C,GAAG,MAAM,QAAQ;AAAA,MACjB,iBAAiB,SAAS,QAAQ;AAAA,MAClC,gBAAgB,SAAS,OAAO;AAAA,MAChC,gBAAgB;AAAA,MAChB,iBAAiB,SAAS,MAAM,QAAQ,QAAQ;AAAA,MAChD,kBAAkB,MAAM,QAAQ;AAAA,MAChC,0BAA0B,SAAS,CAAC,MAAM,QAAQ,iBAAiB;AAAA,MACnE,cAAc,OAAO;AACnB,YAAI,MAAM,UAAU,MAAM,WAAW,CAAC;AAAe;AACrD,cAAM,cAAc,QAAQ,cAAc,MAAM;AAChD,YAAI,YAAY,MAAM,gBAAgB;AAAS;AAC/C,aAAK,EAAE,MAAM,gBAAgB,CAAC;AAAA,MAChC;AAAA,MACA,QAAQ,OAAO;AACb,YAAI,CAAC,iBAAiB,MAAM;AAAQ;AACpC,YAAI,MAAM,cAAc,QAAQ,gBAAgB,SAAS;AACvD,eAAK,EAAE,MAAM,gBAAgB,CAAC;AAAA,QAChC;AAAA,MACF;AAAA,MACA,UAAU;AACR,aAAK,eAAe;AAAA,MACtB;AAAA,MACA,SAAS;AACP,aAAK,cAAc;AAAA,MACrB;AAAA,MACA,UAAU,OAAO;AACf,YAAI,CAAC;AAAe;AACpB,cAAM,SAAsB;AAAA,UAC1B,UAAU;AACR,iBAAK,EAAE,MAAM,WAAW,CAAC;AAAA,UAC3B;AAAA,UACA,YAAY;AACV,iBAAK,EAAE,MAAM,aAAa,CAAC;AAAA,UAC7B;AAAA,UACA,YAAY;AACV,iBAAK,EAAE,MAAM,aAAa,CAAC;AAAA,UAC7B;AAAA,UACA,aAAa;AACX,iBAAK,EAAE,MAAM,cAAc,CAAC;AAAA,UAC9B;AAAA,UACA,OAAO;AACL,iBAAK,EAAE,MAAM,OAAO,CAAC;AAAA,UACvB;AAAA,UACA,QAAQ;AACN,iBAAK,EAAE,MAAM,gBAAgB,CAAC;AAAA,UAChC;AAAA,UACA,MAAM;AACJ,iBAAK,EAAE,MAAM,MAAM,CAAC;AAAA,UACtB;AAAA,UACA,MAAMC,QAAO;AACX,gBAAI,eAAe;AACjB,mBAAK,EAAE,MAAM,aAAa,KAAKA,OAAM,IAAI,CAAC;AAAA,YAC5C,OAAO;AACL,mBAAK,EAAE,MAAM,cAAc,CAAC;AAAA,YAC9B;AAAA,UACF;AAAA,QACF;AAEA,cAAM,OAAO,OAAO,YAAY,OAAO,MAAM,OAAO,CAAC;AAErD,YAAI,MAAM;AACR,eAAK,KAAK;AACV,gBAAM,eAAe;AACrB;AAAA,QACF;AAEA,YAAIC,gBAAe,aAAa,KAAK,GAAG;AACtC,eAAK,EAAE,MAAM,aAAa,KAAK,MAAM,IAAI,CAAC;AAC1C,gBAAM,eAAe;AAAA,QACvB;AAAA,MACF;AAAA,IACF,CAAC;AAAA,IAED,eAAe,OAAoB;AACjC,YAAM,EAAE,OAAO,OAAO,UAAU,IAAI;AACpC,YAAM,cAAc,eAAe,KAAK;AACxC,aAAO,UAAU,QAAQ;AAAA,QACvB,IAAI,IAAI,YAAY,MAAM,SAAS,KAAK;AAAA,QACxC,MAAM;AAAA,QACN,GAAG,MAAM,OAAO;AAAA,QAChB,cAAc;AAAA,QACd,cAAc;AAAA,QACd,kBAAkB,aAAa;AAAA,QAC/B,iBAAiB,YAAY;AAAA,QAC7B,cAAc,YAAY,YAAY,YAAY;AAAA,QAClD,oBAAoB,SAAS,YAAY,aAAa;AAAA,QACtD,iBAAiB,SAAS,YAAY,UAAU;AAAA,QAChD,iBAAiB,SAAS,YAAY,UAAU;AAAA,MAClD,CAAC;AAAA,IACH;AAAA,IAEA,yBAAyB,OAA8B;AACrD,YAAM,EAAE,QAAQ,IAAI;AACpB,aAAO,UAAU,QAAQ;AAAA,QACvB,IAAI,IAAI,iBAAiB,MAAM,SAAS,OAAO;AAAA,QAC/C,MAAM;AAAA,QACN,GAAG,MAAM,iBAAiB;AAAA,MAC5B,CAAC;AAAA,IACH;AAAA,IAEA,oBAAoB,OAAyB;AAC3C,YAAM,EAAE,GAAG,IAAI;AACf,aAAO,UAAU,QAAQ;AAAA,QACvB,GAAG,MAAM,YAAY;AAAA,QACrB,iBAAiB,SAAS,QAAQ;AAAA,QAClC,IAAI,IAAI,iBAAiB,MAAM,SAAS,EAAE;AAAA,QAC1C,mBAAmB,IAAI,sBAAsB,MAAM,SAAS,EAAE;AAAA,MAChE,CAAC;AAAA,IACH;AAAA,IAEA,mBAAmB,UAAU,OAAO;AAAA,MAClC,GAAG,MAAM,aAAa;AAAA,MACtB,MAAM,MAAM,QAAQ;AAAA,MACpB,MAAM,MAAM,QAAQ;AAAA,MACpB,UAAU,CAAC;AAAA,MACX,eAAe;AAAA,MACf,IAAI,IAAI,kBAAkB,MAAM,OAAO;AAAA,MACvC,cAAc,MAAM,QAAQ,gBAAgB;AAAA,MAC5C,OAAO;AAAA,MACP,UAAU;AAAA;AAAA;AAAA,MAGV,UAAU;AACR,YAAI,kBAAkB,MAAM,OAAO,GAAG,MAAM;AAAA,MAC9C;AAAA,MACA,mBAAmB,IAAI,WAAW,MAAM,OAAO;AAAA,IACjD,CAAC;AAAA,IAED,cAAc,UAAU,QAAQ;AAAA,MAC9B,QAAQ,CAAC;AAAA,MACT,KAAK,MAAM,QAAQ;AAAA,MACnB,IAAI,IAAI,aAAa,MAAM,OAAO;AAAA,MAClC,MAAM;AAAA,MACN,GAAG,MAAM,QAAQ;AAAA,MACjB,cAAc,SAAS,SAAS;AAAA,MAChC,yBAAyB,MAAM,QAAQ,iBAAiB;AAAA,MACxD,mBAAmB,IAAI,WAAW,MAAM,OAAO;AAAA,MAC/C,UAAU;AAAA,MACV,cAAc,OAAO;AACnB,YAAI,CAAC;AAAe;AACpB,cAAM,SAAS,IAAI,iBAAiB,MAAM,MAAM;AAChD,YAAI,CAAC,UAAU,OAAO,aAAa,eAAe,GAAG;AACnD,eAAK,EAAE,MAAM,gBAAgB,CAAC;AAAA,QAChC,OAAO;AACL,eAAK,EAAE,MAAM,gBAAgB,IAAI,OAAO,IAAI,QAAQ,OAAO,CAAC;AAAA,QAC9D;AAAA,MACF;AAAA,MACA,YAAY,OAAO;AACjB,YAAI,CAAC;AAAe;AACpB,cAAM,SAAS,IAAI,iBAAiB,MAAM,MAAM;AAChD,YAAI,CAAC,UAAU,OAAO,aAAa,eAAe;AAAG;AACrD,aAAK,EAAE,MAAM,gBAAgB,KAAK,aAAa,IAAI,OAAO,GAAG,CAAC;AAAA,MAChE;AAAA,MACA,iBAAiB;AACf,aAAK,EAAE,MAAM,gBAAgB,CAAC;AAAA,MAChC;AAAA,MACA,QAAQ,OAAO;AACb,YAAI,CAAC;AAAe;AACpB,cAAM,SAAS,IAAI,iBAAiB,MAAM,MAAM;AAChD,YAAI,CAAC,UAAU,OAAO,aAAa,eAAe;AAAG;AACrD,aAAK,EAAE,MAAM,gBAAgB,KAAK,SAAS,IAAI,OAAO,GAAG,CAAC;AAAA,MAC5D;AAAA,MACA,UAAU,OAAO;AACf,YAAI,CAAC,iBAAiB,CAAC,YAAY,KAAK;AAAG;AAE3C,cAAM,SAAsB;AAAA,UAC1B,UAAU;AACR,iBAAK,EAAE,MAAM,WAAW,CAAC;AAAA,UAC3B;AAAA,UACA,YAAY;AACV,iBAAK,EAAE,MAAM,aAAa,CAAC;AAAA,UAC7B;AAAA,UACA,OAAO;AACL,iBAAK,EAAE,MAAM,OAAO,CAAC;AAAA,UACvB;AAAA,UACA,MAAM;AACJ,iBAAK,EAAE,MAAM,MAAM,CAAC;AAAA,UACtB;AAAA,UACA,IAAID,QAAO;AACT,gBAAIA,OAAM;AAAU;AACpB,iBAAK,EAAE,MAAM,MAAM,CAAC;AAAA,UACtB;AAAA,UACA,QAAQ;AACN,iBAAK,EAAE,MAAM,cAAc,CAAC;AAAA,UAC9B;AAAA,UACA,MAAMA,QAAO;AACX,gBAAI,eAAe;AACjB,mBAAK,EAAE,MAAM,aAAa,KAAKA,OAAM,IAAI,CAAC;AAAA,YAC5C,OAAO;AACL,qBAAO,QAAQA,MAAK;AAAA,YACtB;AAAA,UACF;AAAA,QACF;AAEA,cAAM,OAAO,OAAO,YAAY,KAAK,CAAC;AAEtC,YAAI,MAAM;AACR,eAAK,KAAK;AACV,gBAAM,eAAe;AACrB;AAAA,QACF;AAEA,YAAI,kBAAkB,MAAM,MAAM,GAAG;AACnC;AAAA,QACF;AAEA,YAAIC,gBAAe,aAAa,KAAK,GAAG;AACtC,eAAK,EAAE,MAAM,aAAa,KAAK,MAAM,IAAI,CAAC;AAC1C,gBAAM,eAAe;AAAA,QACvB;AAAA,MACF;AAAA,IACF,CAAC;AAAA,EACH;AACF;;;AG9TA,SAAS,qBAAqB;AAC9B,SAAS,+BAA+B;AACxC,SAAS,kBAAAC,iBAAgB,WAAW;AACpC,SAAS,iBAAiB,wBAAwB;AAClD,SAAS,yBAAyB;AAClC,SAAS,oBAAoB;AAC7B,SAAS,qBAAqB;AAC9B,SAAS,SAAS,YAAY;AAIvB,SAAS,QAAQ,aAAiC;AACvD,QAAM,MAAM,QAAQ,WAAW;AAC/B,SAAO;AAAA,IACL;AAAA,MACE,IAAI;AAAA,MACJ,SAAS;AAAA,QACP,aAAa;AAAA,QACb,gBAAgB;AAAA,QAChB,mBAAmB;AAAA,QACnB,MAAM;AAAA,QACN,eAAe;AAAA,QACf,GAAG;AAAA,QACH,uBAAuB;AAAA,QACvB,oBAAoB;AAAA,QACpB,uBAAuB;AAAA,QACvB,WAAWC,gBAAe;AAAA,QAC1B,aAAa;AAAA,UACX,WAAW;AAAA,UACX,QAAQ;AAAA,UACR,GAAG,IAAI;AAAA,QACT;AAAA,MACF;AAAA,MAEA,UAAU;AAAA,QACR,mBAAmB,CAACC,SAAQA,KAAI,kBAAkB;AAAA,QAClD,eAAe,CAACA,SAAQA,KAAI,UAAU,cAAc;AAAA,QACpD,eAAe,CAACA,SAAQ,EAAEA,KAAI,YAAYA,KAAI;AAAA,QAC9C,YAAY,CAACA,SAASA,KAAI,iBAAiB,IAAI,YAAYA,MAAKA,KAAI,eAAe,KAAK,IAAI;AAAA,QAC5F,eAAe,CAACA,SAASA,KAAI,oBAAoB,IAAI,YAAYA,MAAKA,KAAI,kBAAkB,KAAK,IAAI;AAAA,QACrG,oBAAoB,CAACA,SAAQA,KAAI,gBAAgB,UAAUA,KAAI,oBAAoB;AAAA,QACnF,uBAAuB,CAACA,SAAQA,KAAI,mBAAmB,UAAUA,KAAI,uBAAuB;AAAA,MAC9F;AAAA,MAEA,SAAS;AAAA,MAET,OAAO;AAAA,QACL,gBAAgB,CAAC,mBAAmB,qBAAqB;AAAA,MAC3D;AAAA,MAEA,IAAI;AAAA,QACF,kBAAkB;AAAA,UAChB,SAAS,CAAC,wBAAwB,mBAAmB;AAAA,QACvD;AAAA,QACA,eAAe;AAAA,UACb,SAAS,CAAC,qBAAqB,gBAAgB;AAAA,QACjD;AAAA,QACA,gBAAgB;AAAA,UACd,SAAS,CAAC,uBAAuB,gBAAgB;AAAA,QACnD;AAAA,MACF;AAAA,MAEA,OAAO,CAAC,0BAA0B;AAAA,MAElC,YAAY,CAAC,uBAAuB;AAAA,MAEpC,QAAQ;AAAA,QACN,MAAM;AAAA,UACJ,MAAM,CAAC,QAAQ;AAAA,UACf,IAAI;AAAA,YACF,eAAe;AAAA,cACb,QAAQ;AAAA,YACV;AAAA,YACA,eAAe;AAAA,cACb,QAAQ;AAAA,YACV;AAAA,YACA,MAAM;AAAA,cACJ,QAAQ;AAAA,YACV;AAAA,UACF;AAAA,QACF;AAAA,QAEA,SAAS;AAAA,UACP,MAAM,CAAC,QAAQ;AAAA,UACf,OAAO,CAAC,gBAAgB,wBAAwB;AAAA,UAChD,IAAI;AAAA,YACF,eAAe;AAAA,cACb,QAAQ;AAAA,YACV;AAAA,YACA,cAAc;AAAA,cACZ,QAAQ;AAAA,cACR,SAAS,CAAC,wBAAwB;AAAA,YACpC;AAAA,YACA,aAAa;AAAA,cACX,QAAQ;AAAA,YACV;AAAA,YACA,UAAU;AAAA,cACR,QAAQ;AAAA,cACR,SAAS,CAAC,uBAAuB,mBAAmB;AAAA,YACtD;AAAA,YACA,YAAY;AAAA,cACV,QAAQ;AAAA,cACR,SAAS,CAAC,wBAAwB,mBAAmB;AAAA,YACvD;AAAA,YACA,YAAY;AAAA,cACV;AAAA,gBACE,OAAO;AAAA,gBACP,SAAS,CAAC,wBAAwB,gBAAgB;AAAA,cACpD;AAAA,cACA;AAAA,gBACE,SAAS,CAAC,oBAAoB,gBAAgB;AAAA,cAChD;AAAA,YACF;AAAA,YACA,aAAa;AAAA,cACX;AAAA,gBACE,OAAO;AAAA,gBACP,SAAS,CAAC,oBAAoB,gBAAgB;AAAA,cAChD;AAAA,cACA;AAAA,gBACE,SAAS,CAAC,qBAAqB,gBAAgB;AAAA,cACjD;AAAA,YACF;AAAA,YACA,MAAM;AAAA,cACJ,SAAS,CAAC,qBAAqB,gBAAgB;AAAA,YACjD;AAAA,YACA,KAAK;AAAA,cACH,SAAS,CAAC,oBAAoB,gBAAgB;AAAA,YAChD;AAAA,YACA,WAAW;AAAA,cACT,SAAS,CAAC,wBAAwB,gBAAgB;AAAA,YACpD;AAAA,YACA,MAAM;AAAA,cACJ,QAAQ;AAAA,YACV;AAAA,UACF;AAAA,QACF;AAAA,QAEA,MAAM;AAAA,UACJ,MAAM,CAAC,MAAM;AAAA,UACb,OAAO,CAAC,gBAAgB,2BAA2B,cAAc;AAAA,UACjE,MAAM,CAAC,oBAAoB;AAAA,UAC3B,YAAY,CAAC,wBAAwB,oBAAoB,6BAA6B,eAAe;AAAA,UACrG,IAAI;AAAA,YACF,OAAO;AAAA,cACL,QAAQ;AAAA,cACR,SAAS,CAAC,eAAe;AAAA,YAC3B;AAAA,YACA,eAAe;AAAA,cACb,QAAQ;AAAA,cACR,SAAS,CAAC,eAAe;AAAA,YAC3B;AAAA,YACA,cAAc;AAAA,cACZ;AAAA,gBACE,QAAQ;AAAA,gBACR,SAAS,CAAC,2BAA2B,kBAAkB,eAAe;AAAA,gBACtE,OAAO;AAAA,cACT;AAAA,cACA;AAAA,gBACE,SAAS,CAAC,2BAA2B,gBAAgB;AAAA,cACvD;AAAA,YACF;AAAA,YACA,aAAa;AAAA,cACX;AAAA,gBACE,QAAQ;AAAA,gBACR,SAAS,CAAC,2BAA2B,kBAAkB,eAAe;AAAA,gBACtE,OAAO;AAAA,cACT;AAAA,cACA;AAAA,gBACE,SAAS,CAAC,2BAA2B,gBAAgB;AAAA,cACvD;AAAA,YACF;AAAA,YACA,MAAM;AAAA,cACJ,QAAQ;AAAA,cACR,SAAS,CAAC,eAAe;AAAA,YAC3B;AAAA,YACA,MAAM;AAAA,cACJ,SAAS,CAAC,wBAAwB,mBAAmB;AAAA,YACvD;AAAA,YACA,KAAK;AAAA,cACH,SAAS,CAAC,uBAAuB,mBAAmB;AAAA,YACtD;AAAA,YACA,YAAY;AAAA,cACV;AAAA,gBACE,OAAO;AAAA,gBACP,SAAS,CAAC,uBAAuB,mBAAmB;AAAA,cACtD;AAAA,cACA;AAAA,gBACE,SAAS,CAAC,wBAAwB,mBAAmB;AAAA,cACvD;AAAA,YACF;AAAA,YACA,UAAU;AAAA,cACR;AAAA,gBACE,OAAO;AAAA,gBACP,SAAS,CAAC,2BAA2B,mBAAmB;AAAA,cAC1D;AAAA,cACA;AAAA,gBACE,SAAS,CAAC,uBAAuB,mBAAmB;AAAA,cACtD;AAAA,YACF;AAAA,YACA,WAAW;AAAA,cACT,SAAS,CAAC,2BAA2B,mBAAmB;AAAA,YAC1D;AAAA,YACA,cAAc;AAAA,cACZ,SAAS,CAAC,mBAAmB,mBAAmB;AAAA,YAClD;AAAA,YACA,eAAe;AAAA,cACb,SAAS,CAAC,wBAAwB;AAAA,YACpC;AAAA,YACA,KAAK;AAAA,cACH;AAAA,gBACE,QAAQ;AAAA,gBACR,SAAS,CAAC,2BAA2B,iBAAiB,kBAAkB,wBAAwB;AAAA,gBAChG,OAAO;AAAA,cACT;AAAA,cACA;AAAA,gBACE,QAAQ;AAAA,gBACR,SAAS,CAAC,iBAAiB,wBAAwB;AAAA,cACrD;AAAA,YACF;AAAA,UACF;AAAA,QACF;AAAA,MACF;AAAA,IACF;AAAA,IACA;AAAA,MACE,QAAQ;AAAA,QACN,sBAAsB,CAACA,SAAQA,KAAI,iBAAiB;AAAA,QACpD,aAAa,CAACA,SAAQ,CAAC,CAACA,KAAI;AAAA,QAC5B,mBAAmB,CAACA,SAAQA,KAAI;AAAA,QAChC,eAAe,CAACA,SAAQ,CAAC,CAACA,KAAI;AAAA,MAChC;AAAA,MACA,YAAY;AAAA,QACV,cAAcA,MAAK;AACjB,iBAAO,cAAc,IAAI,kBAAkBA,IAAG,GAAG;AAAA,YAC/C,gBAAgB,IAAI,kBAAkBA,IAAG;AAAA,YACzC,QAAQ,IAAiB;AACvB,kBAAI,MAAM,GAAG,MAAM,EAAE,eAAe,KAAK,CAAC,CAAC;AAAA,YAC7C;AAAA,UACF,CAAC;AAAA,QACH;AAAA,QACA,sBAAsBA,MAAK;AACzB,iBAAO,iBAAiB,IAAI,uBAAuBA,IAAG,GAAG;AAAA,YACvD,qBAAqB;AACnB,cAAAA,KAAI,WAAW;AAAA,YACjB;AAAA,YACA,cAAc;AACZ,cAAAA,KAAI,qBAAqBA,KAAI;AAC7B,cAAAA,KAAI,iBAAiBA,KAAI;AAAA,YAC3B;AAAA,UACF,CAAC;AAAA,QACH;AAAA,QACA,qBAAqBA,MAAK,MAAM,EAAE,KAAK,GAAG;AACxC,cAAI,YAAY;AAChB,iBAAO,wBAAwB,IAAI,kBAAkBA,IAAG,GAAG;AAAA,YACzD,SAAS,CAAC,IAAI,kBAAkBA,IAAG,CAAC;AAAA,YACpC,kBAAkB,OAAO;AACvB,0BAAY,MAAM,OAAO;AACzB,cAAAA,KAAI,oBAAoB,KAAK;AAAA,YAC/B;AAAA,YACA,YAAY;AACV,mBAAK,EAAE,MAAM,QAAQ,KAAK,oBAAoB,UAAU,CAAC;AAAA,YAC3D;AAAA,UACF,CAAC;AAAA,QACH;AAAA,QACA,iBAAiBA,MAAK;AACpB,UAAAA,KAAI,mBAAmBA,KAAI,YAAY;AACvC,iBAAO,aAAa,IAAI,kBAAkBA,IAAG,GAAG,IAAI,qBAAqBA,IAAG,GAAG;AAAA,YAC7E,GAAGA,KAAI;AAAA,YACP,WAAW,MAAM;AACf,cAAAA,KAAI,mBAAmB,KAAK;AAAA,YAC9B;AAAA,UACF,CAAC;AAAA,QACH;AAAA,QACA,0BAA0BA,MAAK,MAAM,EAAE,SAAS,GAAG;AACjD,gBAAM,OAAO,MAAM;AACjB,kBAAM,QAAQ,SAAS;AAEvB,gBAAI,MAAM,MAAM,SAAS;AAAgB;AACzC,kBAAM,SAAS,IAAI,qBAAqBA,IAAG;AAC3C,oBAAQ,eAAe,EAAE,OAAO,UAAU,CAAC;AAAA,UAC7C;AAEA,cAAI,MAAM;AACR,iBAAK;AAAA,UACP,CAAC;AAED,iBAAO,kBAAkB,IAAI,kBAAkBA,IAAG,GAAG,CAAC,uBAAuB,GAAG,IAAI;AAAA,QACtF;AAAA,MACF;AAAA,MACA,SAAS;AAAA,QACP,yBAAyBA,MAAK;AAC5B,UAAAA,KAAI,wBAAwBA,KAAI;AAAA,QAClC;AAAA,QACA,wBAAwBA,MAAK;AAC3B,cAAI,CAACA,KAAI;AAAe;AACxB,gBAAM,SAAS,IAAI,kBAAkBA,MAAKA,KAAI,aAAa;AAC3D,0BAAgBA,MAAK,MAAM;AAAA,QAC7B;AAAA,QACA,oBAAoBA,MAAK;AACvB,cAAI,CAACA,KAAI;AAAe;AACxB,gBAAM,SAAS,IAAI,cAAcA,MAAKA,KAAI,aAAa;AACvD,0BAAgBA,MAAK,MAAM;AAAA,QAC7B;AAAA,QACA,qBAAqBA,MAAK;AACxB,gBAAM,SAAS,IAAI,eAAeA,IAAG;AACrC,0BAAgBA,MAAK,MAAM;AAAA,QAC7B;AAAA,QACA,oBAAoBA,MAAK;AACvB,gBAAM,SAAS,IAAI,cAAcA,IAAG;AACpC,0BAAgBA,MAAK,MAAM;AAAA,QAC7B;AAAA,QACA,aAAaA,MAAK;AAChB,cAAI,MAAM;AACR,gBAAI,kBAAkBA,IAAG,GAAG,MAAM,EAAE,eAAe,KAAK,CAAC;AAAA,UAC3D,CAAC;AAAA,QACH;AAAA,QACA,aAAaA,MAAK,KAAK;AACrB,cAAI,IAAI;AAAW;AACnB,cAAI,MAAM;AACR,gBAAI,kBAAkBA,IAAG,GAAG,MAAM,EAAE,eAAe,KAAK,CAAC;AAAA,UAC3D,CAAC;AAAA,QACH;AAAA,QACA,wBAAwBA,MAAK,KAAK;AAChC,gBAAM,KAAK,IAAI,MAAMA,KAAI;AACzB,cAAI,CAAC;AAAI;AACT,gBAAM,SAAS,IAAI,QAAQA,MAAK,EAAE;AAClC,uBAAaA,MAAK,MAAM;AAAA,QAC1B;AAAA,QACA,kBAAkBA,MAAK;AACrB,gBAAM,SAAS,IAAI,eAAeA,IAAG;AACrC,uBAAaA,MAAK,MAAM;AAAA,QAC1B;AAAA,QACA,iBAAiBA,MAAK;AACpB,gBAAM,SAAS,IAAI,cAAcA,IAAG;AACpC,uBAAaA,MAAK,MAAM;AAAA,QAC1B;AAAA,QACA,iBAAiBA,MAAK;AACpB,cAAI,CAACA,KAAI;AAAY;AACrB,gBAAM,SAAS,IAAI,cAAcA,MAAKA,KAAI,UAAU;AACpD,uBAAaA,MAAK,MAAM;AAAA,QAC1B;AAAA,QACA,qBAAqBA,MAAK;AACxB,cAAI,CAACA,KAAI;AAAY;AACrB,gBAAM,SAAS,IAAI,kBAAkBA,MAAKA,KAAI,UAAU;AACxD,uBAAaA,MAAK,MAAM;AAAA,QAC1B;AAAA,QACA,wBAAwBA,MAAK;AAC3B,cAAI,CAACA,KAAI;AAAgB;AACzB,UAAAA,KAAI,wBAAwBA,KAAI;AAChC,UAAAA,KAAI,oBAAoBA,KAAI;AAAA,QAC9B;AAAA,QACA,gBAAgBA,MAAK,KAAK;AACxB,gBAAM,SAAS,IAAI,UAAU,IAAI,QAAQA,MAAK,IAAI,EAAE;AACpD,0BAAgBA,MAAK,MAAM;AAAA,QAC7B;AAAA,QACA,wBAAwBA,MAAK,KAAK;AAChC,gBAAM,SAAS,IAAI,kBAAkBA,MAAK,IAAI,KAAKA,KAAI,aAAa;AACpE,0BAAgBA,MAAK,MAAM;AAAA,QAC7B;AAAA,QACA,qBAAqBA,MAAK,KAAK;AAC7B,gBAAM,SAAS,IAAI,kBAAkBA,MAAK,IAAI,KAAKA,KAAI,UAAU;AACjE,uBAAaA,MAAK,MAAM;AAAA,QAC1B;AAAA,QACA,qBAAqBA,MAAK,KAAK;AAC7B,cAAI,CAAC,IAAI;AAAO;AAChB,UAAAA,KAAI,wBAAwBA,KAAI;AAChC,UAAAA,KAAI,oBAAoB,IAAI;AAAA,QAC9B;AAAA,QACA,uBAAuBA,MAAK;AAC1B,UAAAA,KAAI,oBAAoB;AAAA,QAC1B;AAAA,QACA,kBAAkBA,MAAK,KAAK;AAC1B,cAAI,CAAC,IAAI;AAAO;AAChB,UAAAA,KAAI,qBAAqBA,KAAI;AAC7B,UAAAA,KAAI,iBAAiB,IAAI;AAAA,QAC3B;AAAA,QACA,oBAAoBA,MAAK;AACvB,UAAAA,KAAI,iBAAiB;AAAA,QACvB;AAAA,QACA,mBAAmBA,MAAK;AACtB,cAAI,kBAAkBA,IAAG,GAAG,SAAS,GAAG,CAAC;AAAA,QAC3C;AAAA,QACA,aAAaA,MAAK;AAChB,UAAAA,KAAI,SAAS;AAAA,QACf;AAAA,QACA,cAAcA,MAAK;AACjB,UAAAA,KAAI,UAAU;AAAA,QAChB;AAAA,QACA,kBAAkBA,MAAK;AACrB,cAAI,CAACA,KAAI;AAAuB;AAChC,UAAAA,KAAI,cAAc,KAAKA,KAAI,iBAAiB,CAAC;AAAA,QAC/C;AAAA,QACA,eAAeA,MAAK;AAClB,cAAI,CAACA,KAAI;AAAoB;AAC7B,UAAAA,KAAI,WAAW,KAAKA,KAAI,cAAc,CAAC;AAAA,QACzC;AAAA,QACA,gBAAgBA,MAAK;AACnB,gBAAM,iBAAiBA,KAAI;AAC3B,gBAAM,OAAO,IAAI,uBAAuBA,IAAG;AAC3C,cAAI,CAAC,QAAQ,CAAC;AAAgB;AAC9B,0BAAgB,MAAM,eAAe,OAAO,EAAE,MAAM,oBAAoB,CAAC;AAAA,QAC3E;AAAA,QACA,oBAAoBA,MAAK;AACvB,gBAAM,OAAO,IAAI,uBAAuBA,IAAG;AAC3C,cAAI,CAAC;AAAM;AACX,gBAAM,MAAM,IAAI,OAAOA,IAAG;AAC1B,gBAAM,cAAc,IAAI,IAAI,MAAM,UAAU,EAAE,SAAS,KAAK,CAAC;AAC7D,eAAK,cAAc,WAAW;AAAA,QAChC;AAAA,MACF;AAAA,IACF;AAAA,EACF;AACF;AAEA,SAAS,gBAAgB,KAAqB,QAA6B;AACzE,MAAI,CAAC;AAAQ;AACb,MAAI,wBAAwB,IAAI;AAChC,MAAI,oBAAoB,IAAI,iBAAiB,MAAM;AACrD;AAEA,SAAS,aAAa,KAAqB,QAA6B;AACtE,MAAI,CAAC;AAAQ;AACb,MAAI,qBAAqB,IAAI;AAC7B,MAAI,iBAAiB,IAAI,iBAAiB,MAAM;AAClD;","names":["getByTypeahead","event","getByTypeahead","getByTypeahead","getByTypeahead","ctx"]}